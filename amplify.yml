version: 1
frontend:
  phases:
    preBuild:
      commands:
        - cd hacked-jekyll
        - gem install bundler --no-document
        - bundle config set path 'vendor/bundle'
        - bundle install --jobs 4 --retry 3
    build:
      commands:
        - cd hacked-jekyll
        - bundle exec jekyll build --config _config.yml
  artifacts:
    baseDirectory: hacked-jekyll/_site
    files:
      - '**/*'
  cache:
    paths:
      - hacked-jekyll/vendor/bundle/**/*
      - hacked-jekyll/.jekyll-cache/**/*
